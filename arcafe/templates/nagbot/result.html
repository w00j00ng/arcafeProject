{% extends 'base.html' %}
{% block content %}
<div class="post-form my-3 ml-3">
    <p>
        버튼을 누르면 잔소리가 시작됩니다<br>
        잔소리를 끄시려면 비디오 화면을 선택하고 'q'를 눌러주세요
    </p>
    {% if danger %}
        <p>
            휴식시간이 부족합니다<br>
            업무를 시작한지 1시간이 지난 시점 15분간의 휴식, 또 업무가 끝나기 1시간 전의 15분 휴식이 일의 집중력과 효율을 높일 수 있습니다
        </p>
    {% elif lazy %}
        <p>
            업무 효율이 낮습니다
        </p>
    {% endif %}
</div>
<div>
    <table>
        <tr>
            <td>
                <form action="{{url_for('nagbot.execute')}}" method="post" class="post-form my-3 ml-3">
                    <button type="submit" class="btn btn-primary">시작하기</button>
                </form>
            </td>
            {% if g.user %}
                <td>
                    <form action="{{url_for('nagbot.upload')}}" method="post" class="post-form my-3 ml-3">
                        <input type="hidden" name="username" value="{{g.user.username}}">
                        <input type="hidden" name="operationTime" value="{{operationTime|round(1, 'ceil')}}">
                        <input type="hidden" name="totalWorkingTime" value="{{totalWorkingTime|round(1, 'ceil')}}">
                        <input type="hidden" name="longestOpenedTime" value="{{longestOpenedTime|round(1, 'ceil')}}">
                        <input type="hidden" name="blinkCount" value={{blinkCount}}>
                        <input type="hidden" name="warningCount" value={{warningCount}}>
                        <input type="hidden" name="alertCount" value={{alertCount}}>
                        <button type="submit" class="btn btn-primary">등록하기</button>
                    </form>
                </td>
            {% endif %}
        </tr>
    </table>
</div>
<div class="col-md-3">
  <table class="table table-condensed">
    <thead>
      <tr>
        <th>항목</th><th>시간</th>
      </tr>
    </thead>
    <tbody>
      <tr><td>총 시간</td><td>{{operationTime|round(1, 'ceil')}} 초</td></tr>
      <tr><td>업무 시간</td><td>{{totalWorkingTime|round(1, 'ceil')}} 초</td></tr>
      <tr><td>가장 오래 깜빡이지 않은 시간</td><td>{{longestOpenedTime|round(1, 'ceil')}} 초</td></tr>
      <tr><td>눈 깜빡인 횟수</td><td>{{ blinkCount }} 회</td></tr>
      <tr><td>경고 횟수</td><td>{{ warningCount }} 회</td></tr>
      <tr><td>알람 횟수</td><td>{{ alertCount }} 회</td></tr>
    </tbody>
  </table>
</div>
{% endblock %}